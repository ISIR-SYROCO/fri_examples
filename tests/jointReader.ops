import("lwr_fri")
import("FriExampleJointReader")

loadComponent("lwr", "lwr_fri::FRIComponent")
loadComponent("jointReader", "FriExampleJointReader")

setActivity("lwr", 0, 99, ORO_SCHED_RT)

lwr.udp_port = 49938
lwr.configure

var ConnPolicy cp

//Only last data written is accessible
cp.type = DATA
//Use mutexes
cp.lock_policy = LOCKED

connect("jointReader.fromFRI", "lwr.toKRL", cp)
connect("lwr.FRIJointState", "jointReader.FRIJointState", cp)

jointReader.configure
jointReader.setPeriod(1)

lwr.start
jointReader.start
